{
  "version": 4,
  "terraform_version": "1.6.5",
  "serial": 81,
  "lineage": "fa272284-0697-680f-110d-38973a3f34cc",
  "outputs": {
    "appsync_api_id": {
      "value": "z3xhqvhbeffjxptxnahnhk63nq",
      "type": "string"
    },
    "appsync_api_key": {
      "value": "da2-yhof6rpcwfer7hqfz23ci5z2uy",
      "type": "string",
      "sensitive": true
    },
    "appsync_api_url": {
      "value": "https://4wwv3n7ht5fhpigvf4c2xigtma.appsync-api.us-east-1.amazonaws.com/graphql",
      "type": "string"
    },
    "appsync_service_role_arn": {
      "value": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-appsync-role",
      "type": "string"
    },
    "athena_database_name": {
      "value": "retail_personalization_acme_corp_dev",
      "type": "string"
    },
    "athena_workgroup_name": {
      "value": "retail-personalization-acme-corp-dev",
      "type": "string"
    },
    "aws_region": {
      "value": "us-east-1",
      "type": "string"
    },
    "backend_config": {
      "value": {
        "appsync_api_key": "da2-yhof6rpcwfer7hqfz23ci5z2uy",
        "appsync_api_url": "https://4wwv3n7ht5fhpigvf4c2xigtma.appsync-api.us-east-1.amazonaws.com/graphql",
        "aws_region": "us-east-1",
        "dynamodb_table_name": "retail-personalization-acme-corp-dev-recommendations",
        "environment": "dev",
        "pinpoint_app_id": "c2cb7bf620d149feb9338c4c0ba0b943",
        "project_name": "retail-personalization",
        "s3_bucket_name": "retail-personalization-acme-corp-dev-data",
        "stepfunction_arn": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow",
        "tenant_id": "acme-corp"
      },
      "type": [
        "object",
        {
          "appsync_api_key": "string",
          "appsync_api_url": "string",
          "aws_region": "string",
          "dynamodb_table_name": "string",
          "environment": "string",
          "pinpoint_app_id": "string",
          "project_name": "string",
          "s3_bucket_name": "string",
          "stepfunction_arn": "string",
          "tenant_id": "string"
        }
      ],
      "sensitive": true
    },
    "cloudwatch_dashboard_url": {
      "value": "https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=retail-personalization-acme-corp-dev",
      "type": "string"
    },
    "cloudwatch_log_group_name": {
      "value": "/aws/retail-personalization/acme-corp/dev",
      "type": "string"
    },
    "dynamodb_table_arn": {
      "value": "arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations",
      "type": "string"
    },
    "dynamodb_table_name": {
      "value": "retail-personalization-acme-corp-dev-recommendations",
      "type": "string"
    },
    "ecs_cluster_arn": {
      "value": "arn:aws:ecs:us-east-1:545009852657:cluster/retail-personalization-acme-corp-dev",
      "type": "string"
    },
    "ecs_cluster_name": {
      "value": "retail-personalization-acme-corp-dev",
      "type": "string"
    },
    "ecs_execution_role_arn": {
      "value": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-ecs-execution-role",
      "type": "string"
    },
    "ecs_load_balancer_dns": {
      "value": "",
      "type": "string"
    },
    "ecs_service_name": {
      "value": "",
      "type": "string"
    },
    "ecs_task_definition_arn": {
      "value": "arn:aws:ecs:us-east-1:545009852657:task-definition/retail-personalization-acme-corp-dev:1",
      "type": "string"
    },
    "ecs_task_role_arn": {
      "value": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-ecs-task-role",
      "type": "string"
    },
    "environment": {
      "value": "dev",
      "type": "string"
    },
    "eventbridge_rule_arn": {
      "value": "arn:aws:events:us-east-1:545009852657:rule/retail-personalization-acme-corp-dev-s3-object-created",
      "type": "string"
    },
    "personalize_service_role_arn": {
      "value": "arn:aws:iam::545009852657:role/PersonalizeServiceRole-retail-personalization-acme-corp",
      "type": "string"
    },
    "pinpoint_app_arn": {
      "value": "arn:aws:mobiletargeting:us-east-1:545009852657:apps/c2cb7bf620d149feb9338c4c0ba0b943",
      "type": "string"
    },
    "pinpoint_app_id": {
      "value": "c2cb7bf620d149feb9338c4c0ba0b943",
      "type": "string"
    },
    "project_name": {
      "value": "retail-personalization",
      "type": "string"
    },
    "s3_bucket_arn": {
      "value": "arn:aws:s3:::retail-personalization-acme-corp-dev-data",
      "type": "string"
    },
    "s3_bucket_domain_name": {
      "value": "retail-personalization-acme-corp-dev-data.s3.amazonaws.com",
      "type": "string"
    },
    "s3_bucket_name": {
      "value": "retail-personalization-acme-corp-dev-data",
      "type": "string"
    },
    "stepfunction_arn": {
      "value": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow",
      "type": "string"
    },
    "stepfunction_name": {
      "value": "retail-personalization-acme-corp-dev-ml-workflow",
      "type": "string"
    },
    "tenant_id": {
      "value": "acme-corp",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "545009852657",
            "arn": "arn:aws:iam::545009852657:user/DueSense360",
            "id": "545009852657",
            "user_id": "AIDAX5ZI6MDY7Z4TAAOWJ"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (N. Virginia)",
            "endpoint": "ec2.us-east-1.amazonaws.com",
            "id": "us-east-1",
            "name": "us-east-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (N. Virginia)",
            "endpoint": "ec2.us-east-1.amazonaws.com",
            "id": "us-east-1",
            "name": "us-east-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_api_key",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "z3xhqvhbeffjxptxnahnhk63nq",
            "api_key_id": "da2-yhof6rpcwfer7hqfz23ci5z2uy",
            "description": "API Key for retail-personalization-acme-corp-dev",
            "expires": "2026-06-06T17:00:00Z",
            "id": "z3xhqvhbeffjxptxnahnhk63nq:da2-yhof6rpcwfer7hqfz23ci5z2uy",
            "key": "da2-yhof6rpcwfer7hqfz23ci5z2uy"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.main",
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "dynamodb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "z3xhqvhbeffjxptxnahnhk63nq",
            "arn": "arn:aws:appsync:us-east-1:545009852657:apis/z3xhqvhbeffjxptxnahnhk63nq/datasources/DynamoDBDataSource",
            "description": "",
            "dynamodb_config": [
              {
                "delta_sync_config": [],
                "region": "us-east-1",
                "table_name": "retail-personalization-acme-corp-dev-recommendations",
                "use_caller_credentials": false,
                "versioned": false
              }
            ],
            "elasticsearch_config": [],
            "event_bridge_config": [],
            "http_config": [],
            "id": "z3xhqvhbeffjxptxnahnhk63nq-DynamoDBDataSource",
            "lambda_config": [],
            "name": "DynamoDBDataSource",
            "opensearchservice_config": [],
            "relational_database_config": [],
            "service_role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-appsync-role",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.main",
            "module.appsync.data.aws_region.current",
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_graphql_api",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_authentication_provider": [],
            "api_type": "GRAPHQL",
            "arn": "arn:aws:appsync:us-east-1:545009852657:apis/z3xhqvhbeffjxptxnahnhk63nq",
            "authentication_type": "API_KEY",
            "enhanced_metrics_config": [],
            "id": "z3xhqvhbeffjxptxnahnhk63nq",
            "introspection_config": "ENABLED",
            "lambda_authorizer_config": [],
            "log_config": [
              {
                "cloudwatch_logs_role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-appsync-role",
                "exclude_verbose_content": false,
                "field_log_level": "ALL"
              }
            ],
            "merged_api_execution_role_arn": "",
            "name": "retail-personalization-acme-corp-dev-api",
            "openid_connect_config": [],
            "query_depth_limit": 0,
            "resolver_count_limit": 0,
            "schema": "type Recommendation {\n    userId: String!\n    itemId: String!\n    score: Float!\n    category: String\n    timestamp: AWSTimestamp!\n}\n\ntype RecommendationConnection {\n    items: [Recommendation!]!\n    nextToken: String\n}\n\ninput RecommendationInput {\n    userId: String!\n    itemId: String!\n    score: Float!\n    category: String\n}\n\ntype Query {\n    getRecommendations(userId: String!, limit: Int, nextToken: String): RecommendationConnection\n    getRecommendationsByCategory(category: String!, limit: Int, nextToken: String): RecommendationConnection\n}\n\ntype Mutation {\n    putRecommendation(input: RecommendationInput!): Recommendation\n}\n\ntype Subscription {\n    onRecommendationAdded(userId: String!): Recommendation\n        @aws_subscribe(mutations: [\"putRecommendation\"])\n}\n\nschema {\n    query: Query\n    mutation: Mutation\n    subscription: Subscription\n} ",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-api",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-api",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "uris": {
              "GRAPHQL": "https://4wwv3n7ht5fhpigvf4c2xigtma.appsync-api.us-east-1.amazonaws.com/graphql",
              "REALTIME": "wss://4wwv3n7ht5fhpigvf4c2xigtma.appsync-realtime-api.us-east-1.amazonaws.com/graphql"
            },
            "user_pool_config": [],
            "visibility": "GLOBAL",
            "xray_enabled": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "get_recommendations",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "z3xhqvhbeffjxptxnahnhk63nq",
            "arn": "arn:aws:appsync:us-east-1:545009852657:apis/z3xhqvhbeffjxptxnahnhk63nq/types/Query/resolvers/getRecommendations",
            "caching_config": [],
            "code": "",
            "data_source": "DynamoDBDataSource",
            "field": "getRecommendations",
            "id": "z3xhqvhbeffjxptxnahnhk63nq-Query-getRecommendations",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n    \"version\": \"2017-02-28\",\n    \"operation\": \"Query\",\n    \"query\": {\n        \"expression\": \"user_id = :user_id\",\n        \"expressionValues\": {\n            \":user_id\": {\n                \"S\": \"$ctx.args.userId\"\n            }\n        }\n    },\n    \"limit\": $util.defaultIfNull($ctx.args.limit, 20),\n    \"scanIndexForward\": false\n}\n",
            "response_template": "#if($ctx.error)\n    $util.error($ctx.error.message, $ctx.error.type)\n#end\n{\n    \"items\": [\n        #foreach($item in $ctx.result.items)\n        {\n            \"userId\": \"$item.user_id.S\",\n            \"itemId\": \"$item.item_id.S\",\n            \"score\": $util.defaultIfNull($item.score.N, 0),\n            \"category\": \"$util.defaultIfNull($item.category.S, \"\")\",\n            \"timestamp\": $item.timestamp.N\n        }#if($foreach.hasNext),#end\n        #end\n    ],\n    \"nextToken\": \"$util.defaultIfNull($ctx.result.nextToken, null)\"\n}\n",
            "runtime": [],
            "sync_config": [],
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.dynamodb",
            "module.appsync.aws_appsync_graphql_api.main",
            "module.appsync.data.aws_region.current",
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "get_recommendations_by_category",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "z3xhqvhbeffjxptxnahnhk63nq",
            "arn": "arn:aws:appsync:us-east-1:545009852657:apis/z3xhqvhbeffjxptxnahnhk63nq/types/Query/resolvers/getRecommendationsByCategory",
            "caching_config": [],
            "code": "",
            "data_source": "DynamoDBDataSource",
            "field": "getRecommendationsByCategory",
            "id": "z3xhqvhbeffjxptxnahnhk63nq-Query-getRecommendationsByCategory",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n    \"version\": \"2017-02-28\",\n    \"operation\": \"Query\",\n    \"index\": \"CategoryIndex\",\n    \"query\": {\n        \"expression\": \"category = :category\",\n        \"expressionValues\": {\n            \":category\": {\n                \"S\": \"$ctx.args.category\"\n            }\n        }\n    },\n    \"limit\": $util.defaultIfNull($ctx.args.limit, 20),\n    \"scanIndexForward\": false\n}\n",
            "response_template": "#if($ctx.error)\n    $util.error($ctx.error.message, $ctx.error.type)\n#end\n{\n    \"items\": [\n        #foreach($item in $ctx.result.items)\n        {\n            \"userId\": \"$item.user_id.S\",\n            \"itemId\": \"$item.item_id.S\",\n            \"score\": $util.defaultIfNull($item.score.N, 0),\n            \"category\": \"$item.category.S\",\n            \"timestamp\": $item.timestamp.N\n        }#if($foreach.hasNext),#end\n        #end\n    ],\n    \"nextToken\": \"$util.defaultIfNull($ctx.result.nextToken, null)\"\n}\n",
            "runtime": [],
            "sync_config": [],
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.dynamodb",
            "module.appsync.aws_appsync_graphql_api.main",
            "module.appsync.data.aws_region.current",
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "put_recommendation",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "z3xhqvhbeffjxptxnahnhk63nq",
            "arn": "arn:aws:appsync:us-east-1:545009852657:apis/z3xhqvhbeffjxptxnahnhk63nq/types/Mutation/resolvers/putRecommendation",
            "caching_config": [],
            "code": "",
            "data_source": "DynamoDBDataSource",
            "field": "putRecommendation",
            "id": "z3xhqvhbeffjxptxnahnhk63nq-Mutation-putRecommendation",
            "kind": "UNIT",
            "max_batch_size": 0,
            "pipeline_config": [],
            "request_template": "{\n    \"version\": \"2017-02-28\",\n    \"operation\": \"PutItem\",\n    \"key\": {\n        \"user_id\": {\n            \"S\": \"$ctx.args.input.userId\"\n        },\n        \"item_id\": {\n            \"S\": \"$ctx.args.input.itemId\"\n        }\n    },\n    \"attributeValues\": {\n        \"score\": {\n            \"N\": \"$ctx.args.input.score\"\n        },\n        \"category\": {\n            \"S\": \"$util.defaultIfNull($ctx.args.input.category, \"\")\"\n        },\n        \"timestamp\": {\n            \"N\": \"$util.time.nowEpochSeconds()\"\n        },\n        \"ttl\": {\n            \"N\": \"$util.time.nowEpochSeconds() + 2592000\"\n        }\n    }\n}\n",
            "response_template": "#if($ctx.error)\n    $util.error($ctx.error.message, $ctx.error.type)\n#end\n{\n    \"userId\": \"$ctx.result.user_id.S\",\n    \"itemId\": \"$ctx.result.item_id.S\",\n    \"score\": $ctx.result.score.N,\n    \"category\": \"$util.defaultIfNull($ctx.result.category.S, \"\")\",\n    \"timestamp\": $ctx.result.timestamp.N\n}\n",
            "runtime": [],
            "sync_config": [],
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.dynamodb",
            "module.appsync.aws_appsync_graphql_api.main",
            "module.appsync.data.aws_region.current",
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.athena",
      "mode": "managed",
      "type": "aws_athena_database",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acl_configuration": [],
            "bucket": "retail-personalization-acme-corp-dev-data",
            "comment": "",
            "encryption_configuration": [
              {
                "encryption_option": "SSE_S3",
                "kms_key": ""
              }
            ],
            "expected_bucket_owner": null,
            "force_destroy": false,
            "id": "retail_personalization_acme_corp_dev",
            "name": "retail_personalization_acme_corp_dev",
            "properties": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.athena",
      "mode": "managed",
      "type": "aws_athena_named_query",
      "name": "item_popularity",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "database": "retail_personalization_acme_corp_dev",
            "description": "Analyze item popularity and engagement",
            "id": "c044eb26-d294-4059-b374-f05830a1510f",
            "name": "item_popularity_analysis",
            "query": "SELECT \n    item_id,\n    COUNT(*) as interaction_count,\n    COUNT(DISTINCT user_id) as unique_users,\n    AVG(event_value) as avg_event_value\nFROM interactions \nWHERE event_type IN ('view', 'purchase', 'add_to_cart')\nGROUP BY item_id\nORDER BY interaction_count DESC\nLIMIT 100;\n",
            "workgroup": "retail-personalization-acme-corp-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.athena.aws_athena_database.main",
            "module.athena.aws_athena_workgroup.main",
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.athena",
      "mode": "managed",
      "type": "aws_athena_named_query",
      "name": "user_interactions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "database": "retail_personalization_acme_corp_dev",
            "description": "Analyze user interaction patterns",
            "id": "ad4c9103-f363-4a9e-a870-d1e99ebbee0f",
            "name": "user_interactions_analysis",
            "query": "SELECT \n    user_id,\n    COUNT(*) as interaction_count,\n    COUNT(DISTINCT item_id) as unique_items,\n    AVG(event_value) as avg_event_value\nFROM interactions \nWHERE event_type = 'purchase'\nGROUP BY user_id\nORDER BY interaction_count DESC\nLIMIT 100;\n",
            "workgroup": "retail-personalization-acme-corp-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.athena.aws_athena_database.main",
            "module.athena.aws_athena_workgroup.main",
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.athena",
      "mode": "managed",
      "type": "aws_athena_workgroup",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:athena:us-east-1:545009852657:workgroup/retail-personalization-acme-corp-dev",
            "configuration": [
              {
                "bytes_scanned_cutoff_per_query": 0,
                "enforce_workgroup_configuration": true,
                "engine_version": [
                  {
                    "effective_engine_version": "Athena engine version 3",
                    "selected_engine_version": "AUTO"
                  }
                ],
                "execution_role": "",
                "publish_cloudwatch_metrics_enabled": true,
                "requester_pays_enabled": false,
                "result_configuration": [
                  {
                    "acl_configuration": [],
                    "encryption_configuration": [
                      {
                        "encryption_option": "SSE_S3",
                        "kms_key_arn": ""
                      }
                    ],
                    "expected_bucket_owner": "",
                    "output_location": "s3://retail-personalization-acme-corp-dev-data/athena-results/"
                  }
                ]
              }
            ],
            "description": "",
            "force_destroy": false,
            "id": "retail-personalization-acme-corp-dev",
            "name": "retail-personalization-acme-corp-dev",
            "state": "ENABLED",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.dynamodb",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "campaign_tracking",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-campaigns",
            "attribute": [
              {
                "name": "campaign_id",
                "type": "S"
              },
              {
                "name": "created_at",
                "type": "N"
              },
              {
                "name": "status",
                "type": "S"
              },
              {
                "name": "user_id",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "status",
                "name": "StatusIndex",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "created_at",
                "read_capacity": 0,
                "write_capacity": 0
              }
            ],
            "hash_key": "campaign_id",
            "id": "retail-personalization-acme-corp-dev-campaigns",
            "import_table": [],
            "local_secondary_index": [],
            "name": "retail-personalization-acme-corp-dev-campaigns",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": true,
                "recovery_period_in_days": 35
              }
            ],
            "range_key": "user_id",
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [
              {
                "enabled": true,
                "kms_key_arn": ""
              }
            ],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-campaigns",
              "Project": "retail-personalization",
              "Purpose": "Campaign tracking and analytics",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-campaigns",
              "Project": "retail-personalization",
              "Purpose": "Campaign tracking and analytics",
              "TenantId": "acme-corp"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "ttl",
                "enabled": true
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.dynamodb",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "recommendations_cache",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations",
            "attribute": [
              {
                "name": "category",
                "type": "S"
              },
              {
                "name": "item_id",
                "type": "S"
              },
              {
                "name": "timestamp",
                "type": "N"
              },
              {
                "name": "user_id",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "category",
                "name": "CategoryIndex",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "timestamp",
                "read_capacity": 0,
                "write_capacity": 0
              },
              {
                "hash_key": "timestamp",
                "name": "TimestampIndex",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "KEYS_ONLY",
                "range_key": "",
                "read_capacity": 0,
                "write_capacity": 0
              }
            ],
            "hash_key": "user_id",
            "id": "retail-personalization-acme-corp-dev-recommendations",
            "import_table": [],
            "local_secondary_index": [],
            "name": "retail-personalization-acme-corp-dev-recommendations",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": true,
                "recovery_period_in_days": 35
              }
            ],
            "range_key": "item_id",
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [
              {
                "enabled": true,
                "kms_key_arn": ""
              }
            ],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-recommendations",
              "Project": "retail-personalization",
              "Purpose": "Recommendation cache",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-recommendations",
              "Project": "retail-personalization",
              "Purpose": "Recommendation cache",
              "TenantId": "acme-corp"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "ttl",
                "enabled": true
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.dynamodb",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "user_profiles",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-user-profiles",
            "attribute": [
              {
                "name": "last_activity",
                "type": "N"
              },
              {
                "name": "segment",
                "type": "S"
              },
              {
                "name": "user_id",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [
              {
                "hash_key": "segment",
                "name": "SegmentIndex",
                "non_key_attributes": [],
                "on_demand_throughput": [],
                "projection_type": "ALL",
                "range_key": "last_activity",
                "read_capacity": 0,
                "write_capacity": 0
              }
            ],
            "hash_key": "user_id",
            "id": "retail-personalization-acme-corp-dev-user-profiles",
            "import_table": [],
            "local_secondary_index": [],
            "name": "retail-personalization-acme-corp-dev-user-profiles",
            "on_demand_throughput": [],
            "point_in_time_recovery": [
              {
                "enabled": true,
                "recovery_period_in_days": 35
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_source_table_arn": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [
              {
                "enabled": true,
                "kms_key_arn": ""
              }
            ],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-user-profiles",
              "Project": "retail-personalization",
              "Purpose": "User profiles and segments",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-user-profiles",
              "Project": "retail-personalization",
              "Purpose": "User profiles and segments",
              "TenantId": "acme-corp"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "ttl",
                "enabled": true
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.ecs_fargate",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (N. Virginia)",
            "endpoint": "ec2.us-east-1.amazonaws.com",
            "id": "us-east-1",
            "name": "us-east-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.ecs_fargate",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "ecs_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:545009852657:log-group:/ecs/retail-personalization-acme-corp-dev",
            "id": "/ecs/retail-personalization-acme-corp-dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/ecs/retail-personalization-acme-corp-dev",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-ecs-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-ecs-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs_fargate",
      "mode": "managed",
      "type": "aws_ecs_cluster",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ecs:us-east-1:545009852657:cluster/retail-personalization-acme-corp-dev",
            "configuration": [],
            "id": "arn:aws:ecs:us-east-1:545009852657:cluster/retail-personalization-acme-corp-dev",
            "name": "retail-personalization-acme-corp-dev",
            "service_connect_defaults": [],
            "setting": [
              {
                "name": "containerInsights",
                "value": "enabled"
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.ecs_fargate",
      "mode": "managed",
      "type": "aws_ecs_task_definition",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ecs:us-east-1:545009852657:task-definition/retail-personalization-acme-corp-dev:1",
            "arn_without_revision": "arn:aws:ecs:us-east-1:545009852657:task-definition/retail-personalization-acme-corp-dev",
            "container_definitions": "[{\"environment\":[{\"name\":\"NODE_ENV\",\"value\":\"dev\"},{\"name\":\"PROJECT_NAME\",\"value\":\"retail-personalization\"},{\"name\":\"TENANT_ID\",\"value\":\"acme-corp\"}],\"essential\":true,\"image\":\"nginx:latest\",\"logConfiguration\":{\"logDriver\":\"awslogs\",\"options\":{\"awslogs-group\":\"/ecs/retail-personalization-acme-corp-dev\",\"awslogs-region\":\"us-east-1\",\"awslogs-stream-prefix\":\"ecs\"}},\"mountPoints\":[],\"name\":\"backend-api\",\"portMappings\":[{\"containerPort\":3000,\"hostPort\":3000,\"protocol\":\"tcp\"}],\"systemControls\":[],\"volumesFrom\":[]}]",
            "cpu": "256",
            "enable_fault_injection": false,
            "ephemeral_storage": [],
            "execution_role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-ecs-execution-role",
            "family": "retail-personalization-acme-corp-dev",
            "id": "retail-personalization-acme-corp-dev",
            "inference_accelerator": [],
            "ipc_mode": "",
            "memory": "512",
            "network_mode": "awsvpc",
            "pid_mode": "",
            "placement_constraints": [],
            "proxy_configuration": [],
            "requires_compatibilities": [
              "FARGATE"
            ],
            "revision": 1,
            "runtime_platform": [],
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "task_role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-ecs-task-role",
            "track_latest": false,
            "volume": []
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.ecs_fargate.aws_cloudwatch_log_group.ecs_logs",
            "module.ecs_fargate.data.aws_region.current",
            "module.iam.aws_iam_role.ecs_execution_role",
            "module.iam.aws_iam_role.ecs_task_role"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge",
      "mode": "managed",
      "type": "aws_cloudwatch_event_bus",
      "name": "application_events",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:events:us-east-1:545009852657:event-bus/retail-personalization-acme-corp-dev-events",
            "dead_letter_config": [],
            "description": "",
            "event_source_name": null,
            "id": "retail-personalization-acme-corp-dev-events",
            "kms_key_identifier": "",
            "name": "retail-personalization-acme-corp-dev-events",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-events",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-events",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.eventbridge",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "application_events",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:us-east-1:545009852657:rule/retail-personalization-acme-corp-dev-events/retail-personalization-acme-corp-dev-app-events",
            "description": "Handle application-specific events",
            "event_bus_name": "retail-personalization-acme-corp-dev-events",
            "event_pattern": "{\"detail-type\":[\"Model Training Complete\",\"Campaign Status Change\"],\"source\":[\"retail.personalization\"]}",
            "force_destroy": false,
            "id": "retail-personalization-acme-corp-dev-events/retail-personalization-acme-corp-dev-app-events",
            "is_enabled": true,
            "name": "retail-personalization-acme-corp-dev-app-events",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-app-events",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-app-events",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.eventbridge.aws_cloudwatch_event_bus.application_events"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "s3_object_created",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:us-east-1:545009852657:rule/retail-personalization-acme-corp-dev-s3-object-created",
            "description": "Trigger ML workflow when new data is uploaded to S3",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"bucket\":{\"name\":[\"retail-personalization-acme-corp-dev-data\"]},\"object\":{\"key\":[{\"prefix\":\"datasets/\"}]}},\"detail-type\":[\"Object Created\"],\"source\":[\"aws.s3\"]}",
            "force_destroy": false,
            "id": "retail-personalization-acme-corp-dev-s3-object-created",
            "is_enabled": true,
            "name": "retail-personalization-acme-corp-dev-s3-object-created",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-s3-object-created",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-s3-object-created",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "scheduled_retraining",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:us-east-1:545009852657:rule/retail-personalization-acme-corp-dev-scheduled-retraining",
            "description": "Scheduled model retraining",
            "event_bus_name": "default",
            "event_pattern": null,
            "force_destroy": false,
            "id": "retail-personalization-acme-corp-dev-scheduled-retraining",
            "is_enabled": true,
            "name": "retail-personalization-acme-corp-dev-scheduled-retraining",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "rate(7 days)",
            "state": "ENABLED",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-scheduled-retraining",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-scheduled-retraining",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "module": "module.eventbridge",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "scheduled_retraining_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "retail-personalization-acme-corp-dev-scheduled-retraining-ScheduledRetrainingTarget",
            "input": "{\"campaignName\":\"retail-personalization-acme-corp-campaign-scheduled\",\"dataLocation\":\"s3://retail-personalization-acme-corp-dev-data/datasets/interactions.csv\",\"datasetArn\":\"/datasets/interactions\",\"datasetGroupArn\":\"\",\"jobName\":\"retail-personalization-acme-corp-scheduled-retrain\",\"personalizeRoleArn\":\"arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-eventbridge-role\",\"solutionName\":\"retail-personalization-acme-corp-solution-scheduled\"}",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-eventbridge-role",
            "rule": "retail-personalization-acme-corp-dev-scheduled-retraining",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "ScheduledRetrainingTarget"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.eventbridge.aws_cloudwatch_event_rule.scheduled_retraining",
            "module.iam.aws_iam_role.eventbridge_role",
            "module.iam.aws_iam_role.stepfunction_execution_role",
            "module.s3.aws_s3_bucket.data_bucket",
            "module.stepfunctions.aws_sfn_state_machine.ml_workflow"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "stepfunction_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "retail-personalization-acme-corp-dev-s3-object-created-StepFunctionTarget",
            "input": "",
            "input_path": "",
            "input_transformer": [
              {
                "input_paths": {
                  "bucket": "$.detail.bucket.name",
                  "key": "$.detail.object.key"
                },
                "input_template": "{\"campaignName\":\"retail-personalization-acme-corp-campaign-\\u003caws.events.event.ingestion-time\\u003e\",\"dataLocation\":\"s3://\\u003cbucket\\u003e/\\u003ckey\\u003e\",\"datasetArn\":\"/datasets/interactions\",\"datasetGroupArn\":\"\",\"jobName\":\"retail-personalization-acme-corp-import-\\u003caws.events.event.ingestion-time\\u003e\",\"personalizeRoleArn\":\"arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-eventbridge-role\",\"solutionName\":\"retail-personalization-acme-corp-solution-\\u003caws.events.event.ingestion-time\\u003e\"}"
              }
            ],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-eventbridge-role",
            "rule": "retail-personalization-acme-corp-dev-s3-object-created",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "StepFunctionTarget"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.eventbridge.aws_cloudwatch_event_rule.s3_object_created",
            "module.iam.aws_iam_role.eventbridge_role",
            "module.iam.aws_iam_role.stepfunction_execution_role",
            "module.s3.aws_s3_bucket.data_bucket",
            "module.stepfunctions.aws_sfn_state_machine.ml_workflow"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "appsync_service_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-appsync-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-appsync-role",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-appsync-dynamodb-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:DeleteItem\",\"dynamodb:Query\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations\",\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations/index/*\"]}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-appsync-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-appsync-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-appsync-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDY3RBBJA442"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-ecs-execution-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-ecs-execution-role",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
            ],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-ecs-execution-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-ecs-execution-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-ecs-execution-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDYXYPODSTDX"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "ecs_task_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-ecs-task-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:57Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-ecs-task-role",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-ecs-task-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::retail-personalization-acme-corp-dev-data\",\"arn:aws:s3:::retail-personalization-acme-corp-dev-data/*\"]},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:DeleteItem\",\"dynamodb:Query\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations\",\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations/index/*\"]},{\"Action\":[\"states:StartExecution\",\"states:DescribeExecution\",\"states:ListExecutions\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"personalize:GetRecommendations\",\"personalize:DescribeCampaign\",\"personalize:ListCampaigns\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-ecs-task-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-ecs-task-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-ecs-task-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDY3GLM6HPCR"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "eventbridge_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-eventbridge-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"events.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:57Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-eventbridge-role",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-eventbridge-stepfunction-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"states:StartExecution\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-eventbridge-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-eventbridge-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-eventbridge-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDY35G6QA25P"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-lambda-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T17:08:11Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-lambda-role",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-lambda-pinpoint-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}"
              }
            ],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
            ],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-lambda-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-lambda-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-lambda-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDYS5YT2MMGK"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "personalize_service_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/PersonalizeServiceRole-retail-personalization-acme-corp",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"personalize.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "PersonalizeServiceRole-retail-personalization-acme-corp",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-personalize-s3-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::retail-personalization-acme-corp-dev-data\",\"arn:aws:s3:::retail-personalization-acme-corp-dev-data/*\"]}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "PersonalizeServiceRole-retail-personalization-acme-corp",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "PersonalizeServiceRole-retail-personalization-acme-corp",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "PersonalizeServiceRole-retail-personalization-acme-corp",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDYWK5FMUFEX"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "pinpoint_service_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-pinpoint-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"pinpoint.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-pinpoint-role",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-pinpoint-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"mobiletargeting:SendMessages\",\"mobiletargeting:SendUsersMessages\",\"mobiletargeting:GetCampaign\",\"mobiletargeting:GetCampaigns\",\"mobiletargeting:CreateCampaign\",\"mobiletargeting:UpdateCampaign\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-pinpoint-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-pinpoint-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-pinpoint-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDYRB2OOC4LY"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "stepfunction_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-stepfunction-role",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-06-06T16:59:56Z",
            "description": "",
            "force_detach_policies": false,
            "id": "retail-personalization-acme-corp-dev-stepfunction-role",
            "inline_policy": [
              {
                "name": "retail-personalization-acme-corp-stepfunction-logs-delivery",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogDelivery\",\"logs:GetLogDelivery\",\"logs:UpdateLogDelivery\",\"logs:DeleteLogDelivery\",\"logs:ListLogDeliveries\",\"logs:PutResourcePolicy\",\"logs:DescribeResourcePolicies\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"
              },
              {
                "name": "retail-personalization-acme-corp-stepfunction-policy",
                "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"personalize:CreateDatasetImportJob\",\"personalize:CreateSolution\",\"personalize:CreateSolutionVersion\",\"personalize:CreateCampaign\",\"personalize:DescribeDatasetImportJob\",\"personalize:DescribeSolution\",\"personalize:DescribeSolutionVersion\",\"personalize:DescribeCampaign\",\"personalize:ListDatasetImportJobs\",\"personalize:ListSolutions\",\"personalize:ListSolutionVersions\",\"personalize:ListCampaigns\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::retail-personalization-acme-corp-dev-data\",\"arn:aws:s3:::retail-personalization-acme-corp-dev-data/*\"]},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"logs:CreateLogDelivery\",\"logs:GetLogDelivery\",\"logs:UpdateLogDelivery\",\"logs:DeleteLogDelivery\",\"logs:ListLogDeliveries\",\"logs:PutResourcePolicy\",\"logs:DescribeResourcePolicies\",\"logs:DescribeLogGroups\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}"
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "retail-personalization-acme-corp-dev-stepfunction-role",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-stepfunction-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-stepfunction-role",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "unique_id": "AROAX5ZI6MDY75X2YFUEM"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "appsync_dynamodb_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-appsync-role:retail-personalization-acme-corp-appsync-dynamodb-policy",
            "name": "retail-personalization-acme-corp-appsync-dynamodb-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:DeleteItem\",\"dynamodb:Query\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations\",\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations/index/*\"]}]}",
            "role": "retail-personalization-acme-corp-dev-appsync-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.iam.aws_iam_role.appsync_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "ecs_task_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-ecs-task-role:retail-personalization-acme-corp-ecs-task-policy",
            "name": "retail-personalization-acme-corp-ecs-task-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::retail-personalization-acme-corp-dev-data\",\"arn:aws:s3:::retail-personalization-acme-corp-dev-data/*\"]},{\"Action\":[\"dynamodb:GetItem\",\"dynamodb:PutItem\",\"dynamodb:UpdateItem\",\"dynamodb:DeleteItem\",\"dynamodb:Query\",\"dynamodb:Scan\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations\",\"arn:aws:dynamodb:us-east-1:545009852657:table/retail-personalization-acme-corp-dev-recommendations/index/*\"]},{\"Action\":[\"states:StartExecution\",\"states:DescribeExecution\",\"states:ListExecutions\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"personalize:GetRecommendations\",\"personalize:DescribeCampaign\",\"personalize:ListCampaigns\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "retail-personalization-acme-corp-dev-ecs-task-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.iam.aws_iam_role.ecs_task_role",
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "eventbridge_stepfunction_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-eventbridge-role:retail-personalization-acme-corp-eventbridge-stepfunction-policy",
            "name": "retail-personalization-acme-corp-eventbridge-stepfunction-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"states:StartExecution\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "retail-personalization-acme-corp-dev-eventbridge-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.eventbridge_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "lambda_pinpoint_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-lambda-role:retail-personalization-acme-corp-lambda-pinpoint-policy",
            "name": "retail-personalization-acme-corp-lambda-pinpoint-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}",
            "role": "retail-personalization-acme-corp-dev-lambda-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.lambda_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "personalize_s3_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "PersonalizeServiceRole-retail-personalization-acme-corp:retail-personalization-acme-corp-personalize-s3-policy",
            "name": "retail-personalization-acme-corp-personalize-s3-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\",\"s3:PutObject\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::retail-personalization-acme-corp-dev-data\",\"arn:aws:s3:::retail-personalization-acme-corp-dev-data/*\"]}]}",
            "role": "PersonalizeServiceRole-retail-personalization-acme-corp"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.personalize_service_role",
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "pinpoint_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-pinpoint-role:retail-personalization-acme-corp-pinpoint-policy",
            "name": "retail-personalization-acme-corp-pinpoint-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"mobiletargeting:SendMessages\",\"mobiletargeting:SendUsersMessages\",\"mobiletargeting:GetCampaign\",\"mobiletargeting:GetCampaigns\",\"mobiletargeting:CreateCampaign\",\"mobiletargeting:UpdateCampaign\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "retail-personalization-acme-corp-dev-pinpoint-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.pinpoint_service_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "stepfunction_logs_delivery",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-stepfunction-role:retail-personalization-acme-corp-stepfunction-logs-delivery",
            "name": "retail-personalization-acme-corp-stepfunction-logs-delivery",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogDelivery\",\"logs:GetLogDelivery\",\"logs:UpdateLogDelivery\",\"logs:DeleteLogDelivery\",\"logs:ListLogDeliveries\",\"logs:PutResourcePolicy\",\"logs:DescribeResourcePolicies\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}",
            "role": "retail-personalization-acme-corp-dev-stepfunction-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.stepfunction_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "stepfunction_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-stepfunction-role:retail-personalization-acme-corp-stepfunction-policy",
            "name": "retail-personalization-acme-corp-stepfunction-policy",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"personalize:CreateDatasetImportJob\",\"personalize:CreateSolution\",\"personalize:CreateSolutionVersion\",\"personalize:CreateCampaign\",\"personalize:DescribeDatasetImportJob\",\"personalize:DescribeSolution\",\"personalize:DescribeSolutionVersion\",\"personalize:DescribeCampaign\",\"personalize:ListDatasetImportJobs\",\"personalize:ListSolutions\",\"personalize:ListSolutionVersions\",\"personalize:ListCampaigns\"],\"Effect\":\"Allow\",\"Resource\":\"*\"},{\"Action\":[\"s3:GetObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::retail-personalization-acme-corp-dev-data\",\"arn:aws:s3:::retail-personalization-acme-corp-dev-data/*\"]},{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"logs:CreateLogDelivery\",\"logs:GetLogDelivery\",\"logs:UpdateLogDelivery\",\"logs:DeleteLogDelivery\",\"logs:ListLogDeliveries\",\"logs:PutResourcePolicy\",\"logs:DescribeResourcePolicies\",\"logs:DescribeLogGroups\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:*:*:*\"}]}",
            "role": "retail-personalization-acme-corp-dev-stepfunction-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.stepfunction_execution_role",
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ecs_execution_role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-ecs-execution-role-20250606165957448300000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
            "role": "retail-personalization-acme-corp-dev-ecs-execution-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.ecs_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "lambda_basic_execution",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "retail-personalization-acme-corp-dev-lambda-role-20250606170812320500000001",
            "policy_arn": "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
            "role": "retail-personalization-acme-corp-dev-lambda-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.lambda_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (N. Virginia)",
            "endpoint": "ec2.us-east-1.amazonaws.com",
            "id": "us-east-1",
            "name": "us-east-1"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_dashboard",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dashboard_arn": "arn:aws:cloudwatch::545009852657:dashboard/retail-personalization-acme-corp-dev",
            "dashboard_body": "{\"widgets\":[{\"height\":6,\"properties\":{\"metrics\":[[\"AWS/AppSync\",\"4XXError\",\"GraphQLAPIId\",\"z3xhqvhbeffjxptxnahnhk63nq\"],[\".\",\"5XXError\",\".\",\".\"],[\".\",\"Latency\",\".\",\".\"]],\"period\":300,\"region\":\"us-east-1\",\"stacked\":false,\"title\":\"AppSync Metrics\",\"view\":\"timeSeries\"},\"type\":\"metric\",\"width\":12,\"x\":0,\"y\":0},{\"height\":6,\"properties\":{\"metrics\":[[\"AWS/DynamoDB\",\"ConsumedReadCapacityUnits\",\"TableName\",\"retail-personalization-acme-corp-dev-recommendations\"],[\".\",\"ConsumedWriteCapacityUnits\",\".\",\".\"],[\".\",\"ThrottledRequests\",\".\",\".\"]],\"period\":300,\"region\":\"us-east-1\",\"stacked\":false,\"title\":\"DynamoDB Metrics\",\"view\":\"timeSeries\"},\"type\":\"metric\",\"width\":12,\"x\":0,\"y\":6}]}",
            "dashboard_name": "retail-personalization-acme-corp-dev",
            "id": "retail-personalization-acme-corp-dev"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.main",
            "module.dynamodb.aws_dynamodb_table.recommendations_cache",
            "module.ecs_fargate.aws_cloudwatch_log_group.ecs_logs",
            "module.ecs_fargate.aws_ecs_cluster.main",
            "module.ecs_fargate.aws_ecs_service.main",
            "module.ecs_fargate.aws_ecs_task_definition.main",
            "module.ecs_fargate.aws_lb.main",
            "module.ecs_fargate.aws_lb_listener.main",
            "module.ecs_fargate.aws_lb_target_group.main",
            "module.ecs_fargate.data.aws_region.current",
            "module.ecs_fargate.data.aws_subnet.first",
            "module.iam.aws_iam_role.appsync_service_role",
            "module.iam.aws_iam_role.ecs_execution_role",
            "module.iam.aws_iam_role.ecs_task_role",
            "module.monitoring.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:545009852657:log-group:/aws/retail-personalization/acme-corp/dev",
            "id": "/aws/retail-personalization/acme-corp/dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/retail-personalization/acme-corp/dev",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "appsync_errors",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [
              "arn:aws:sns:us-east-1:545009852657:retail-personalization-acme-corp-dev-alerts"
            ],
            "alarm_description": "This metric monitors AppSync 4XX errors",
            "alarm_name": "retail-personalization-acme-corp-appsync-errors",
            "arn": "arn:aws:cloudwatch:us-east-1:545009852657:alarm:retail-personalization-acme-corp-appsync-errors",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "GraphQLAPIId": "z3xhqvhbeffjxptxnahnhk63nq"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 2,
            "extended_statistic": "",
            "id": "retail-personalization-acme-corp-appsync-errors",
            "insufficient_data_actions": [],
            "metric_name": "4XXError",
            "metric_query": [],
            "namespace": "AWS/AppSync",
            "ok_actions": [],
            "period": 300,
            "statistic": "Sum",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-appsync-errors",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-appsync-errors",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "threshold": 10,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.main",
            "module.iam.aws_iam_role.appsync_service_role",
            "module.monitoring.aws_sns_topic.alerts"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "stepfunction_failures",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [
              "arn:aws:sns:us-east-1:545009852657:retail-personalization-acme-corp-dev-alerts"
            ],
            "alarm_description": "This metric monitors Step Functions execution failures",
            "alarm_name": "retail-personalization-acme-corp-stepfunction-failures",
            "arn": "arn:aws:cloudwatch:us-east-1:545009852657:alarm:retail-personalization-acme-corp-stepfunction-failures",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "StateMachineArn": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "retail-personalization-acme-corp-stepfunction-failures",
            "insufficient_data_actions": [],
            "metric_name": "ExecutionsFailed",
            "metric_query": [],
            "namespace": "AWS/States",
            "ok_actions": [],
            "period": 300,
            "statistic": "Sum",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-stepfunction-failures",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-stepfunction-failures",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "threshold": 0,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.iam.aws_iam_role.stepfunction_execution_role",
            "module.monitoring.aws_sns_topic.alerts",
            "module.stepfunctions.aws_sfn_state_machine.ml_workflow"
          ]
        }
      ]
    },
    {
      "module": "module.monitoring",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "alerts",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": 0,
            "archive_policy": "",
            "arn": "arn:aws:sns:us-east-1:545009852657:retail-personalization-acme-corp-dev-alerts",
            "beginning_archive_time": "",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "",
            "fifo_throughput_scope": "",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": 0,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": 0,
            "id": "arn:aws:sns:us-east-1:545009852657:retail-personalization-acme-corp-dev-alerts",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": 0,
            "name": "retail-personalization-acme-corp-dev-alerts",
            "name_prefix": "",
            "owner": "545009852657",
            "policy": "{\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\"],\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"545009852657\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"arn:aws:sns:us-east-1:545009852657:retail-personalization-acme-corp-dev-alerts\",\"Sid\":\"__default_statement_ID\"}],\"Version\":\"2008-10-17\"}",
            "signature_version": 0,
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": 0,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-alerts",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-alerts",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tracing_config": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.pinpoint",
      "mode": "data",
      "type": "archive_file",
      "name": "campaign_hook_zip",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "86b325f5d6bea24360298902cc966c5fb8fabda9",
            "output_base64sha256": "HSBNXp2Asj+gVz3oF+dCrg/bd5D5h3ltPogTxBi9it0=",
            "output_base64sha512": "0qVkJen7qylhJVWR/fxMB5B5Jtg0H6lxS0EwfRDTQau9eT1fR7hKc61IbFUKmZLRZKrWKIvYHdKl2FiapMPXpQ==",
            "output_file_mode": null,
            "output_md5": "8bb6a35a7843accf6c7b5cb1d20f104d",
            "output_path": "modules/pinpoint/campaign_hook.zip",
            "output_sha": "86b325f5d6bea24360298902cc966c5fb8fabda9",
            "output_sha256": "1d204d5e9d80b23fa0573de817e742ae0fdb7790f987796d3e8813c418bd8add",
            "output_sha512": "d2a56425e9fbab2961255591fdfc4c07907926d8341fa9714b41307d10d341abbd793d5f47b84a73ad486c550a9992d164aad6288bd81dd2a5d8589aa4c3d7a5",
            "output_size": 283,
            "source": [
              {
                "content": "import json\n\ndef handler(event, context):\n    print(f\"Campaign hook triggered: {json.dumps(event)}\")\n    return {\n        'statusCode': 200,\n        'body': json.dumps('Campaign hook processed successfully')\n    }\n",
                "filename": "index.py"
              }
            ],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": null,
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.pinpoint",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "pinpoint_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:545009852657:log-group:/aws/pinpoint/retail-personalization-acme-corp-dev",
            "id": "/aws/pinpoint/retail-personalization-acme-corp-dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/pinpoint/retail-personalization-acme-corp-dev",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-pinpoint-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-pinpoint-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.pinpoint",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "campaign_hook",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "x86_64"
            ],
            "arn": "arn:aws:lambda:us-east-1:545009852657:function:retail-personalization-acme-corp-campaign-hook",
            "code_sha256": "HSBNXp2Asj+gVz3oF+dCrg/bd5D5h3ltPogTxBi9it0=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "modules/pinpoint/campaign_hook.zip",
            "function_name": "retail-personalization-acme-corp-campaign-hook",
            "handler": "index.handler",
            "id": "retail-personalization-acme-corp-campaign-hook",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:545009852657:function:retail-personalization-acme-corp-campaign-hook/invocations",
            "kms_key_arn": "",
            "last_modified": "2025-06-06T17:08:21.177+0000",
            "layers": [],
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/retail-personalization-acme-corp-campaign-hook",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-1:545009852657:function:retail-personalization-acme-corp-campaign-hook:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:545009852657:function:retail-personalization-acme-corp-campaign-hook:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-lambda-role",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "",
            "source_code_size": 283,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-campaign-hook",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-campaign-hook",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "timeout": 60,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.iam.aws_iam_role.lambda_execution_role"
          ]
        }
      ]
    },
    {
      "module": "module.pinpoint",
      "mode": "managed",
      "type": "aws_lambda_permission",
      "name": "pinpoint_invoke",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": "lambda:InvokeFunction",
            "event_source_token": null,
            "function_name": "retail-personalization-acme-corp-campaign-hook",
            "function_url_auth_type": null,
            "id": "AllowExecutionFromPinpoint",
            "principal": "pinpoint.amazonaws.com",
            "principal_org_id": null,
            "qualifier": "",
            "source_account": null,
            "source_arn": null,
            "statement_id": "AllowExecutionFromPinpoint",
            "statement_id_prefix": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.lambda_execution_role",
            "module.pinpoint.aws_lambda_function.campaign_hook"
          ]
        }
      ]
    },
    {
      "module": "module.pinpoint",
      "mode": "managed",
      "type": "aws_pinpoint_app",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_id": "c2cb7bf620d149feb9338c4c0ba0b943",
            "arn": "arn:aws:mobiletargeting:us-east-1:545009852657:apps/c2cb7bf620d149feb9338c4c0ba0b943",
            "campaign_hook": [
              {
                "lambda_function_name": "",
                "mode": "",
                "web_url": ""
              }
            ],
            "id": "c2cb7bf620d149feb9338c4c0ba0b943",
            "limits": [
              {
                "daily": 100,
                "maximum_duration": 600,
                "messages_per_second": 50,
                "total": 100
              }
            ],
            "name": "retail-personalization-acme-corp-dev",
            "name_prefix": "",
            "quiet_time": [
              {
                "end": "06:00",
                "start": "22:00"
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.pinpoint",
      "mode": "managed",
      "type": "aws_ses_domain_identity",
      "name": "main",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ses:us-east-1:545009852657:identity/retail-personalization.com",
            "domain": "retail-personalization.com",
            "id": "retail-personalization.com",
            "verification_token": "QMO3Cc/dW2F6VPctLSCl1UFVD9Zgi5kVyhiMckL+c5I="
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "access_logs_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::retail-personalization-acme-corp-dev-access-logs",
            "bucket": "retail-personalization-acme-corp-dev-access-logs",
            "bucket_domain_name": "retail-personalization-acme-corp-dev-access-logs.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "retail-personalization-acme-corp-dev-access-logs.s3.us-east-1.amazonaws.com",
            "cors_rule": [],
            "force_destroy": false,
            "grant": [
              {
                "id": "fc20653013dd8ab264e22412933b3c8000c85beb132e9453b20fb8c058db9a04",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "retail-personalization-acme-corp-dev-access-logs",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-access-logs",
              "Project": "retail-personalization",
              "Purpose": "S3 access logs",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-access-logs",
              "Project": "retail-personalization",
              "Purpose": "S3 access logs",
              "TenantId": "acme-corp"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "data_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::retail-personalization-acme-corp-dev-data",
            "bucket": "retail-personalization-acme-corp-dev-data",
            "bucket_domain_name": "retail-personalization-acme-corp-dev-data.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "retail-personalization-acme-corp-dev-data.s3.us-east-1.amazonaws.com",
            "cors_rule": [
              {
                "allowed_headers": [
                  "*"
                ],
                "allowed_methods": [
                  "POST",
                  "GET",
                  "HEAD",
                  "DELETE",
                  "PUT"
                ],
                "allowed_origins": [
                  "*"
                ],
                "expose_headers": [
                  "ETag"
                ],
                "max_age_seconds": 3000
              }
            ],
            "force_destroy": false,
            "grant": [
              {
                "id": "fc20653013dd8ab264e22412933b3c8000c85beb132e9453b20fb8c058db9a04",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z3AQBSTGFYJSTF",
            "id": "retail-personalization-acme-corp-dev-data",
            "lifecycle_rule": [
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [],
                "id": "transition_to_ia",
                "noncurrent_version_expiration": [],
                "noncurrent_version_transition": [],
                "prefix": "",
                "tags": {},
                "transition": [
                  {
                    "date": "",
                    "days": 30,
                    "storage_class": "STANDARD_IA"
                  },
                  {
                    "date": "",
                    "days": 365,
                    "storage_class": "DEEP_ARCHIVE"
                  },
                  {
                    "date": "",
                    "days": 90,
                    "storage_class": "GLACIER"
                  }
                ]
              },
              {
                "abort_incomplete_multipart_upload_days": 7,
                "enabled": true,
                "expiration": [],
                "id": "delete_incomplete_multipart_uploads",
                "noncurrent_version_expiration": [],
                "noncurrent_version_transition": [],
                "prefix": "",
                "tags": {},
                "transition": []
              },
              {
                "abort_incomplete_multipart_upload_days": 0,
                "enabled": true,
                "expiration": [],
                "id": "delete_old_versions",
                "noncurrent_version_expiration": [
                  {
                    "days": 90
                  }
                ],
                "noncurrent_version_transition": [],
                "prefix": "",
                "tags": {},
                "transition": []
              }
            ],
            "logging": [
              {
                "target_bucket": "retail-personalization-acme-corp-dev-access-logs",
                "target_prefix": "access-logs/"
              }
            ],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-1",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": true
                  }
                ]
              }
            ],
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-data",
              "Project": "retail-personalization",
              "Purpose": "Data storage and model artifacts",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-data",
              "Project": "retail-personalization",
              "Purpose": "Data storage and model artifacts",
              "TenantId": "acme-corp"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": true,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19"
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_cors_configuration",
      "name": "data_bucket_cors",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-data",
            "cors_rule": [
              {
                "allowed_headers": [
                  "*"
                ],
                "allowed_methods": [
                  "DELETE",
                  "GET",
                  "HEAD",
                  "POST",
                  "PUT"
                ],
                "allowed_origins": [
                  "*"
                ],
                "expose_headers": [
                  "ETag"
                ],
                "id": "",
                "max_age_seconds": 3000
              }
            ],
            "expected_bucket_owner": "",
            "id": "retail-personalization-acme-corp-dev-data"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_lifecycle_configuration",
      "name": "data_bucket_lifecycle",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-data",
            "expected_bucket_owner": "",
            "id": "retail-personalization-acme-corp-dev-data",
            "rule": [
              {
                "abort_incomplete_multipart_upload": [],
                "expiration": [],
                "filter": [
                  {
                    "and": [],
                    "object_size_greater_than": null,
                    "object_size_less_than": null,
                    "prefix": "",
                    "tag": []
                  }
                ],
                "id": "transition_to_ia",
                "noncurrent_version_expiration": [],
                "noncurrent_version_transition": [],
                "prefix": "",
                "status": "Enabled",
                "transition": [
                  {
                    "date": null,
                    "days": 30,
                    "storage_class": "STANDARD_IA"
                  },
                  {
                    "date": null,
                    "days": 365,
                    "storage_class": "DEEP_ARCHIVE"
                  },
                  {
                    "date": null,
                    "days": 90,
                    "storage_class": "GLACIER"
                  }
                ]
              },
              {
                "abort_incomplete_multipart_upload": [
                  {
                    "days_after_initiation": 7
                  }
                ],
                "expiration": [],
                "filter": [
                  {
                    "and": [],
                    "object_size_greater_than": null,
                    "object_size_less_than": null,
                    "prefix": "",
                    "tag": []
                  }
                ],
                "id": "delete_incomplete_multipart_uploads",
                "noncurrent_version_expiration": [],
                "noncurrent_version_transition": [],
                "prefix": "",
                "status": "Enabled",
                "transition": []
              },
              {
                "abort_incomplete_multipart_upload": [],
                "expiration": [],
                "filter": [
                  {
                    "and": [],
                    "object_size_greater_than": null,
                    "object_size_less_than": null,
                    "prefix": "",
                    "tag": []
                  }
                ],
                "id": "delete_old_versions",
                "noncurrent_version_expiration": [
                  {
                    "newer_noncurrent_versions": null,
                    "noncurrent_days": 90
                  }
                ],
                "noncurrent_version_transition": [],
                "prefix": "",
                "status": "Enabled",
                "transition": []
              }
            ],
            "timeouts": null,
            "transition_default_minimum_object_size": "all_storage_classes_128K"
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_logging",
      "name": "data_bucket_logging",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-data",
            "expected_bucket_owner": "",
            "id": "retail-personalization-acme-corp-dev-data",
            "target_bucket": "retail-personalization-acme-corp-dev-access-logs",
            "target_grant": [],
            "target_object_key_format": [],
            "target_prefix": "access-logs/"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.access_logs_bucket",
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_notification",
      "name": "data_bucket_notification",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-data",
            "eventbridge": true,
            "id": "retail-personalization-acme-corp-dev-data",
            "lambda_function": [],
            "queue": [],
            "topic": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "access_logs_bucket_pab",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "retail-personalization-acme-corp-dev-access-logs",
            "id": "retail-personalization-acme-corp-dev-access-logs",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.access_logs_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "data_bucket_pab",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "retail-personalization-acme-corp-dev-data",
            "id": "retail-personalization-acme-corp-dev-data",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_server_side_encryption_configuration",
      "name": "access_logs_bucket_encryption",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-access-logs",
            "expected_bucket_owner": "",
            "id": "retail-personalization-acme-corp-dev-access-logs",
            "rule": [
              {
                "apply_server_side_encryption_by_default": [
                  {
                    "kms_master_key_id": "",
                    "sse_algorithm": "AES256"
                  }
                ],
                "bucket_key_enabled": false
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.access_logs_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_server_side_encryption_configuration",
      "name": "data_bucket_encryption",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-data",
            "expected_bucket_owner": "",
            "id": "retail-personalization-acme-corp-dev-data",
            "rule": [
              {
                "apply_server_side_encryption_by_default": [
                  {
                    "kms_master_key_id": "",
                    "sse_algorithm": "AES256"
                  }
                ],
                "bucket_key_enabled": true
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.s3",
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "data_bucket_versioning",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "retail-personalization-acme-corp-dev-data",
            "expected_bucket_owner": "",
            "id": "retail-personalization-acme-corp-dev-data",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.s3.aws_s3_bucket.data_bucket"
          ]
        }
      ]
    },
    {
      "module": "module.stepfunctions",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "stepfunction_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:us-east-1:545009852657:log-group:/aws/stepfunctions/retail-personalization-acme-corp-dev",
            "id": "/aws/stepfunctions/retail-personalization-acme-corp-dev",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "/aws/stepfunctions/retail-personalization-acme-corp-dev",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-stepfunction-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-stepfunction-logs",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.stepfunctions",
      "mode": "managed",
      "type": "aws_sfn_state_machine",
      "name": "ml_workflow",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow",
            "creation_date": "2025-06-06T17:24:22Z",
            "definition": "{\"Comment\":\"ML Workflow for Retail Personalization\",\"StartAt\":\"CheckDatasetExists\",\"States\":{\"CampaignFailed\":{\"Cause\":\"Campaign creation failed\",\"Error\":\"CampaignFailed\",\"Type\":\"Fail\"},\"CheckCampaignStatus\":{\"Next\":\"IsCampaignComplete\",\"Parameters\":{\"CampaignArn.$\":\"$.CampaignArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:describeCampaign\",\"Type\":\"Task\"},\"CheckDatasetExists\":{\"Catch\":[{\"ErrorEquals\":[\"States.TaskFailed\"],\"Next\":\"DatasetNotFound\"}],\"Next\":\"CreateDatasetImportJob\",\"Parameters\":{\"DatasetArn.$\":\"$.datasetArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:describeDataset\",\"Type\":\"Task\"},\"CheckDatasetImportStatus\":{\"Next\":\"IsDatasetImportComplete\",\"Parameters\":{\"DatasetImportJobArn.$\":\"$.DatasetImportJobArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:describeDatasetImportJob\",\"Type\":\"Task\"},\"CheckSolutionVersionStatus\":{\"Next\":\"IsSolutionVersionComplete\",\"Parameters\":{\"SolutionVersionArn.$\":\"$.SolutionVersionArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:describeSolutionVersion\",\"Type\":\"Task\"},\"CreateCampaign\":{\"Next\":\"WaitForCampaign\",\"Parameters\":{\"MinProvisionedTPS\":1,\"Name.$\":\"$.campaignName\",\"SolutionVersionArn.$\":\"$.SolutionVersionArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:createCampaign\",\"Type\":\"Task\"},\"CreateDatasetImportJob\":{\"Next\":\"WaitForDatasetImport\",\"Parameters\":{\"DataSource\":{\"DataLocation.$\":\"$.dataLocation\"},\"DatasetArn.$\":\"$.datasetArn\",\"JobName.$\":\"$.jobName\",\"RoleArn.$\":\"$.personalizeRoleArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:createDatasetImportJob\",\"Type\":\"Task\"},\"CreateSolution\":{\"Next\":\"CreateSolutionVersion\",\"Parameters\":{\"DatasetGroupArn.$\":\"$.datasetGroupArn\",\"Name.$\":\"$.solutionName\",\"RecipeArn\":\"arn:aws:personalize:::recipe/aws-user-personalization\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:createSolution\",\"Type\":\"Task\"},\"CreateSolutionVersion\":{\"Next\":\"WaitForSolutionVersion\",\"Parameters\":{\"SolutionArn.$\":\"$.SolutionArn\"},\"Resource\":\"arn:aws:states:::aws-sdk:personalize:createSolutionVersion\",\"Type\":\"Task\"},\"DatasetImportFailed\":{\"Cause\":\"Dataset import failed\",\"Error\":\"DatasetImportFailed\",\"Type\":\"Fail\"},\"DatasetNotFound\":{\"Cause\":\"Dataset does not exist\",\"Error\":\"DatasetNotFound\",\"Type\":\"Fail\"},\"IsCampaignComplete\":{\"Choices\":[{\"Next\":\"WorkflowComplete\",\"StringEquals\":\"ACTIVE\",\"Variable\":\"$.Status\"},{\"Next\":\"CampaignFailed\",\"StringEquals\":\"CREATE FAILED\",\"Variable\":\"$.Status\"}],\"Default\":\"WaitForCampaign\",\"Type\":\"Choice\"},\"IsDatasetImportComplete\":{\"Choices\":[{\"Next\":\"CreateSolution\",\"StringEquals\":\"ACTIVE\",\"Variable\":\"$.Status\"},{\"Next\":\"DatasetImportFailed\",\"StringEquals\":\"CREATE FAILED\",\"Variable\":\"$.Status\"}],\"Default\":\"WaitForDatasetImport\",\"Type\":\"Choice\"},\"IsSolutionVersionComplete\":{\"Choices\":[{\"Next\":\"CreateCampaign\",\"StringEquals\":\"ACTIVE\",\"Variable\":\"$.Status\"},{\"Next\":\"SolutionVersionFailed\",\"StringEquals\":\"CREATE FAILED\",\"Variable\":\"$.Status\"}],\"Default\":\"WaitForSolutionVersion\",\"Type\":\"Choice\"},\"SolutionVersionFailed\":{\"Cause\":\"Solution version creation failed\",\"Error\":\"SolutionVersionFailed\",\"Type\":\"Fail\"},\"WaitForCampaign\":{\"Next\":\"CheckCampaignStatus\",\"Seconds\":60,\"Type\":\"Wait\"},\"WaitForDatasetImport\":{\"Next\":\"CheckDatasetImportStatus\",\"Seconds\":60,\"Type\":\"Wait\"},\"WaitForSolutionVersion\":{\"Next\":\"CheckSolutionVersionStatus\",\"Seconds\":300,\"Type\":\"Wait\"},\"WorkflowComplete\":{\"Comment\":\"ML workflow completed successfully\",\"Type\":\"Succeed\"}}}",
            "description": "",
            "encryption_configuration": [
              {
                "kms_data_key_reuse_period_seconds": 0,
                "kms_key_id": "",
                "type": "AWS_OWNED_KEY"
              }
            ],
            "id": "arn:aws:states:us-east-1:545009852657:stateMachine:retail-personalization-acme-corp-dev-ml-workflow",
            "logging_configuration": [
              {
                "include_execution_data": false,
                "level": "OFF",
                "log_destination": ""
              }
            ],
            "name": "retail-personalization-acme-corp-dev-ml-workflow",
            "name_prefix": "",
            "publish": false,
            "revision_id": "",
            "role_arn": "arn:aws:iam::545009852657:role/retail-personalization-acme-corp-dev-stepfunction-role",
            "state_machine_version_arn": "",
            "status": "ACTIVE",
            "tags": {
              "Environment": "dev",
              "Name": "retail-personalization-acme-corp-dev-ml-workflow",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "tags_all": {
              "Environment": "dev",
              "ManagedBy": "Terraform",
              "Name": "retail-personalization-acme-corp-dev-ml-workflow",
              "Project": "retail-personalization",
              "TenantId": "acme-corp"
            },
            "timeouts": null,
            "tracing_configuration": [
              {
                "enabled": false
              }
            ],
            "type": "STANDARD",
            "version_description": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjozMDAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.iam.aws_iam_role.stepfunction_execution_role"
          ]
        }
      ]
    }
  ],
  "check_results": []
}
